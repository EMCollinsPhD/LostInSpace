<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Astrogator v0.2.5</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>
    <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body class="bg-slate-900 text-slate-200 font-mono">
    <div class="app-container">
        <!-- Header -->
        <header>
            <div class="header-top">
                <div class="title-group">
                    <h1 class="text-green-500">ASTROGATOR <span class="version">v0.x.x</span></h1>
                </div>
                <!-- ... existing header content ... -->

                <div class="status-group">
                    <div class="flex gap-2">
                        <button id="btn-help" class="btn-icon" title="Help"><i data-lucide="help-circle"></i></button>
                        <button id="btn-refresh" class="btn-icon" title="Refresh Data"><i
                                data-lucide="refresh-cw"></i></button>
                        <button id="btn-logout" class="btn-icon" title="Logout"><i data-lucide="log-out"></i></button>
                    </div>
                    <div class="badge">UTC: <span id="display-utc">--</span></div>
                    <div class="badge">JD: <span id="display-jd">--</span></div>
                    <!-- <div class="badge">FUEL: <span id="display-fuel">--</span> m/s</div> -->
                </div>
            </div>
            <nav class="tab-nav">
                <button class="tab-btn active" data-tab="tab-tracker">STAR TRACKER</button>
                <button class="tab-btn" data-tab="tab-overview">OVERVIEW</button>
                <button class="tab-btn" data-tab="tab-schedule">DELTA-V SCHEDULE</button>
            </nav>
        </header>

        <!-- Main Content Area -->
        <main>
            <!-- TAB 1: Star Tracker -->
            <div id="tab-tracker" class="tab-content active transition-all duration-300">
                <section class="tracker-panel">
                    <div class="canvas-container">
                        <canvas id="star-tracker"></canvas>
                        <div id="tracker-overlay"></div>

                        <!-- Telemetry Overlay -->
                        <div class="telemetry-overlay">
                            <ul class="telemetry-list">
                                <li><span>FOV:</span> <span id="display-fov" class="text-green-500">--</span></li>
                                <li><span>CTR RA:</span> <span id="display-ra" class="text-green-500">--</span></li>
                                <li><span>CTR DEC:</span> <span id="display-dec" class="text-green-500">--</span></li>
                                <li><span>TARGET:</span> <span id="display-target" class="text-cyan-500">--</span></li>
                            </ul>
                        </div>
                    </div>
                </section>
            </div>

            <!-- TAB 2: Overview -->
            <div id="tab-overview" class="tab-content hidden">
                <div id="orrery-container" style="width: 100%; height: 100%; position: relative; overflow: hidden;">
                    <!-- Three.js Canvas will be injected here -->
                </div>
            </div>

            <!-- TAB 3: Delta-V Schedule (Placeholder) -->
            <div id="tab-schedule" class="tab-content hidden">
                <div class="empty-state">
                    <h3>Delta-V Scheduler</h3>
                    <p>Mission Planning Interface Coming Soon...</p>
                </div>
            </div>
        </main>
    </div>

    <!-- Help Modal (Same as before) -->
    <div id="help-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>GNC OPERATING MANUAL</h2>
                <button id="btn-close-help" class="btn-icon"><i data-lucide="x"></i></button>
            </div>
            <div class="modal-body">
                <h3>1. NAVIGATION SENSORS</h3>
                <p>The <span class="text-green-500">Primary Optical Sensor</span> (Star Tracker) provides a view of the
                    celestial sphere.</p>
                <ul>
                    <li><span class="text-white">White Dots:</span> Distant stars.</li>
                    <li><span class="text-cyan-500">Cyan/Yellow Dots:</span> Solar system bodies.</li>
                    <li><strong>Interaction:</strong> Drag to Pan, Scroll to Zoom.</li>
                </ul>

                <h3>2. MANEUVER EXECUTION</h3>
                <p>Enter Delta-V vector (X, Y, Z) in <strong>km/s</strong> and click <strong>EXECUTE BURN</strong>.</p>

                <h3>3. SYSTEM UPDATES</h3>
                <p>Data auto-refreshes every 60s. Use <strong>REFRESH DATA</strong> for instant updates.</p>
            </div>
            <div class="modal-footer">
                <button id="btn-ack-help" class="btn btn-green-outline">ACKNOWLEDGE</button>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="login-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>IDENTIFICATION REQUIRED</h2>
            </div>
            <div class="modal-body">
                <p class="mb-4 text-sm text-slate-400">Please enter your spacecraft credentials to access the Astrogator
                    GNC system.</p>

                <div class="login-grid">
                    <label for="login-id" class="text-right uppercase text-slate-500 text-xs font-bold pt-2">Spacecraft
                        ID</label>
                    <input type="text" id="login-id" class="input-dark font-mono" placeholder="e.g. student1">

                    <label for="login-token" class="text-right uppercase text-slate-500 text-xs font-bold pt-2">Access
                        Token</label>
                    <input type="password" id="login-token" class="input-dark font-mono" placeholder="••••••••••••">
                </div>

                <div id="login-error" class="hidden text-red-500 text-xs text-center mt-4">Authentication Failed</div>
            </div>
            <div class="modal-footer">
                <button id="btn-login" class="btn btn-green w-full">AUTHENTICATE</button>
            </div>
        </div>
    </div>

    <script type="module" src="app.js"></script>
    <script>
        lucide.createIcons();
    </script>
</body>

</html>